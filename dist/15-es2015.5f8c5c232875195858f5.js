(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Yj9t:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthModule",(function(){return y}));var o=a("ofXK"),r=a("tyNb"),n=a("3Pt+"),i=a("bTqV"),c=a("Wp6s"),s=a("kmnG"),u=a("qFsG"),b=a("YUcS"),l=a("eAqi"),m=a("vY5A"),p=a("fXoL"),f=a("z1O9"),d=a("XiUz");function h(e,t){if(1&e){const e=p.Vb();p.Ub(0,"form",3),p.cc("ngSubmit",(function(){return p.qc(e),p.ec().signInUp()})),p.Ub(1,"mat-form-field",4),p.Pb(2,"input",5),p.Tb(),p.Ub(3,"mat-form-field",4),p.Pb(4,"input",6),p.Tb(),p.Ub(5,"button",7),p.zc(6," Auth "),p.Tb(),p.Tb()}if(2&e){const e=p.ec();p.jc("formGroup",e.form)}}function g(e,t){1&e&&(p.Ub(0,"p"),p.zc(1,"You are logged in."),p.Tb())}function v(e,t){if(1&e){const e=p.Vb();p.Ub(0,"form",3),p.cc("ngSubmit",(function(){return p.qc(e),p.ec().signup()})),p.Ub(1,"mat-form-field",4),p.Pb(2,"input",5),p.Tb(),p.Ub(3,"mat-form-field",4),p.Pb(4,"input",6),p.Tb(),p.Ub(5,"button",7),p.zc(6,"Register "),p.Tb(),p.Tb()}if(2&e){const e=p.ec();p.jc("formGroup",e.form)}}function S(e,t){1&e&&(p.Ub(0,"p"),p.zc(1,"You are logged in."),p.Tb())}function w(e,t){if(1&e){const e=p.Vb();p.Ub(0,"form",3),p.cc("ngSubmit",(function(){return p.qc(e),p.ec().login()})),p.Ub(1,"mat-form-field",4),p.Pb(2,"input",5),p.Tb(),p.Ub(3,"mat-form-field",4),p.Pb(4,"input",6),p.Tb(),p.Ub(5,"button",7),p.zc(6,"Sign in "),p.Tb(),p.Tb()}if(2&e){const e=p.ec();p.jc("formGroup",e.form)}}function I(e,t){1&e&&(p.Ub(0,"p"),p.zc(1,"You are logged in."),p.Tb())}const U=[{path:"",component:(()=>{class e{constructor(e,t,a,o){this.router=e,this.fb=t,this.authService=a,this.alertsService=o,this.auth=new n.c}ngOnInit(){this.form=this.fb.group({email:["",[n.p.required,n.p.email]],password:["",n.p.required]})}ngAfterViewInit(){var e;l.a.loggedIn()&&this.router.navigateByUrl((e=Object(m.b)(location.href),null==e?"/secret-dashboard":e)).then(()=>{})}signInUp(){this.authService.signinup(this.form.value).subscribe(e=>{var t;e.hasOwnProperty("access_token")?(this.authService._login(e),this.router.navigateByUrl((t=Object(m.b)(location.href),null==t?"/secret-dashboard":t)).then(()=>{}).catch(console.error)):this.alertsService.add(`Unexpected: ${JSON.stringify(e)};`)})}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(r.b),p.Ob(n.b),p.Ob(l.a),p.Ob(f.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-signinup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","","fxLayout","row","fxLayout.lt-md","column","fxLayoutGap","25px",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","","fxLayout","row","fxLayout.lt-md","column","fxLayoutGap","25px",3,"formGroup","ngSubmit"],["fxFlex",""],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit","fxFlex","20",2,"height","40px"]],template:function(e,t){1&e&&(p.Ub(0,"mat-card"),p.Ub(1,"mat-card-header"),p.Ub(2,"h1",0),p.zc(3,"Sign in/up"),p.Tb(),p.Tb(),p.Ub(4,"mat-card-content"),p.xc(5,h,7,1,"form",1),p.xc(6,g,2,0,"p",2),p.Tb(),p.Tb()),2&e&&(p.Cb(5),p.jc("ngIf",!t.authService.loggedIn()),p.Cb(1),p.jc("ngIf",t.authService.loggedIn()))},directives:[c.a,c.d,c.c,o.k,n.q,n.k,d.b,d.c,n.f,s.b,d.a,n.a,u.a,n.j,n.d,i.b],styles:[""]}),e})()},{path:"signup",component:(()=>{class e{constructor(e,t,a,o){this.router=e,this.fb=t,this.authService=a,this.alertsService=o,this.auth=new n.c}ngOnInit(){this.form=this.fb.group({email:["",[n.p.required,n.p.email]],password:["",n.p.required]})}signup(){this.authService.register(this.form.value).subscribe(e=>{var t;e.headers.has("x-access-token")?(this.authService.accessToken=e.headers.get("x-access-token"),localStorage.setItem("access-token",this.authService.accessToken),this.router.navigateByUrl((t=Object(m.b)(location.href),null==t?"/secret-dashboard":t)).then(()=>{})):this.alertsService.add("No access token in response")})}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(r.b),p.Ob(n.b),p.Ob(l.a),p.Ob(f.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-signup"]],decls:7,vars:2,consts:[[1,"mat-h1"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["fxLayout","column","novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"]],template:function(e,t){1&e&&(p.Ub(0,"mat-card"),p.Ub(1,"mat-card-header"),p.Ub(2,"h1",0),p.zc(3,"Signup"),p.Tb(),p.Tb(),p.Ub(4,"mat-card-content"),p.xc(5,v,7,1,"form",1),p.xc(6,S,2,0,"p",2),p.Tb(),p.Tb()),2&e&&(p.Cb(5),p.jc("ngIf",!t.authService.loggedIn()),p.Cb(1),p.jc("ngIf",t.authService.loggedIn()))},directives:[c.a,c.d,c.c,o.k,n.q,n.k,d.b,n.f,s.b,n.a,u.a,n.j,n.d,i.b],styles:[""]}),e})()},{path:"login",component:(()=>{class e{constructor(e,t,a,o){this.router=e,this.fb=t,this.authService=a,this.alertsService=o,this.auth=new n.c}ngOnInit(){this.form=this.fb.group({email:["",[n.p.required,n.p.email]],password:["",n.p.required]})}login(){this.authService.login(this.form.value).subscribe(e=>{var t;null!=e.access_token?(this.authService.accessToken=e.access_token,localStorage.setItem("access-token",this.authService.accessToken),this.router.navigateByUrl((t=Object(m.b)(location.href),null==t?"/secret-dashboard":t)).then(()=>{})):this.alertsService.add("No access token; try logging in again")})}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(r.b),p.Ob(n.b),p.Ob(l.a),p.Ob(f.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-login"]],decls:7,vars:2,consts:[[1,"mat-h1"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"example-full-width","form-group"],["formControlName","email","id","email","matInput","","name","email","placeholder","Email","type","email"],["formControlName","password","id","password","matInput","","name","password","placeholder","Password","type","password"],["color","accent","mat-raised-button","","type","submit"]],template:function(e,t){1&e&&(p.Ub(0,"mat-card"),p.Ub(1,"mat-card-header"),p.Ub(2,"h1",0),p.zc(3,"Login"),p.Tb(),p.Tb(),p.Ub(4,"mat-card-content"),p.xc(5,w,7,1,"form",1),p.xc(6,I,2,0,"p",2),p.Tb(),p.Tb()),2&e&&(p.Cb(5),p.jc("ngIf",!t.authService.loggedIn()),p.Cb(1),p.jc("ngIf",t.authService.loggedIn()))},directives:[c.a,c.d,c.c,o.k,n.q,n.k,n.f,s.b,n.a,u.a,n.j,n.d,i.b],styles:[""]}),e})()},{path:"logout",component:(()=>{class e{constructor(e){this.authService=e}ngOnInit(){this.authService.logout()}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(l.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-logout"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()}];let y=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},providers:[l.a],imports:[[o.c,r.f,r.f.forChild(U),n.g,n.n,b.a,u.b,c.e,s.d,i.c]]}),e})()}}]);